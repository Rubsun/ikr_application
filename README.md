# ИКР-проект группы 2022

## Описание проекта

Проект представляет собой Android-приложение с модульной архитектурой, реализующее фича-модуль для управления задачами (Tasks).

## Архитектура

Проект следует принципам **Clean Architecture** с разделением на слои:

- **ui** - слой логики отображения данных (Fragment, ViewModel, Compose UI)
- **domain** - слой рабочей логики приложения (UseCase, Domain модели)
- **data** - слой для получения "сырых" данных (Repository, DTO)

Каждый слой знает только про тот слой, который находится ниже.

### Структура модулей

```
mobile/
├── app/                          # Главный модуль приложения
├── features/
│   └── tasks/
│       ├── api/                  # Публичный API модуля
│       └── impl/                 # Реализация модуля
│           ├── data/             # Data слой
│           ├── domain/           # Domain слой
│           └── ui/               # UI слой
└── libs/                         # Библиотечные модули
    ├── storage/                   # Абстракция для хранилища
    ├── network/                   # Абстракция для сетевых запросов
    └── imageloader/              # Абстракция для загрузки изображений
```

## Реализованные требования

### ✅ До 16.12.2025

- ✅ Убрано использование LiveData, используется Kotlin Flow
- ✅ Данные получаются на фрагмент в виде State-объекта через Flow
- ✅ Добавлена поисковая строка для фильтрации задач
- ✅ Добавлена возможность добавления новых задач
- ✅ Все внешние библиотеки подключены через Gradle Catalog
- ✅ Тяжелые операции выполняются в IO/Default потоках через Dispatchers

### ✅ До 20.12.2025

- ✅ Фича-модуль вынесен из app модуля
- ✅ Созданы модули `tasks:api` и `tasks:impl`
- ✅ В api модуле добавлен `TasksFeatureProvider` для получения Fragment
- ✅ Все классы в impl модуле имеют видимость `internal`
- ✅ Настроен DI через Koin
- ✅ Реализовано персистентное хранилище через SharedPreferences

### ✅ До 24.12.2025

- ✅ Убраны прямые ссылки на внешние библиотеки из фича-модуля
- ✅ Созданы обертки над библиотеками:
  - `StorageProvider` - абстракция над SharedPreferences
  - `ApiClient` - абстракция над Retrofit
  - `ImageLoader` - абстракция над Coil
- ✅ Добавлена загрузка данных из внешнего API (имитация)
- ✅ Все зависимости управляются через библиотечные модули

## Используемые технологии

- **Kotlin** - основной язык разработки
- **Jetpack Compose** - UI фреймворк
- **Kotlin Flow** - для реактивного программирования
- **Koin** - для Dependency Injection
- **Kotlinx Serialization** - для сериализации данных
- **Retrofit** - для сетевых запросов (через абстракцию)
- **Coil** - для загрузки изображений (через абстракцию)
- **SharedPreferences** - для локального хранилища (через абстракцию)

## Настройка проекта

### Требования

- Android Studio Hedgehog или новее
- JDK 17 или выше
- Android SDK 24+ (minSdk)
- Android SDK 34 (compileSdk)

### Установка

1. Клонируйте репозиторий
2. Откройте проект в Android Studio
3. Дождитесь синхронизации Gradle
4. Запустите приложение

## Получение API токена (если требуется)

Если вы хотите использовать реальный внешний API с токеном:

1. Получите API ключ на сайте провайдера API
2. Создайте файл `local.properties` в корне проекта (если его нет)
3. Добавьте строку:
   ```
   api.key=YOUR_API_KEY_HERE
   ```
4. Обновите `App.kt` для чтения ключа из `local.properties`:
   ```kotlin
   val apiKey = BuildConfig.API_KEY // или из local.properties
   ```

**Важно:** Файл `local.properties` уже добавлен в `.gitignore` и не будет закоммичен в репозиторий.

## Структура фича-модуля Tasks

### Data слой

- `TasksRepository` - репозиторий для работы с данными
  - Генерирует фейковые данные при первом запуске
  - Сохраняет данные в персистентное хранилище
  - Загружает данные из внешнего API (имитация)
- `TaskDto` - DTO модель для данных из API/хранилища

### Domain слой

- `Task` - доменная модель задачи
- `GetTasksUseCase` - получение списка задач
- `FilterTasksUseCase` - фильтрация задач по поисковому запросу
- `AddTaskUseCase` - добавление новой задачи
- `ToggleTaskCompletionUseCase` - переключение статуса задачи
- `LoadTasksFromApiUseCase` - загрузка задач из API

### UI слой

- `TasksFragment` - Fragment для отображения экрана
- `TasksViewModel` - ViewModel с StateFlow и Flow
- `TasksScreen` - Compose UI экран
- `TasksUiState` - состояние UI

## Особенности реализации

1. **Абстракция от внешних библиотек**: Все внешние библиотеки инкапсулированы в библиотечных модулях
2. **Персистентное хранилище**: Данные сохраняются в SharedPreferences через абстракцию
3. **Реактивное программирование**: Используется Kotlin Flow для реактивных потоков данных
4. **Модульность**: Фича-модуль полностью изолирован и может быть легко переиспользован
5. **DI через Koin**: Все зависимости настроены через Koin модули

## Дальнейшее развитие

- Добавить Room для более сложного хранилища данных
- Реализовать реальную интеграцию с внешним API
- Добавить unit тесты для UseCase и ViewModel
- Добавить UI тесты для Compose экранов
- Реализовать навигацию между экранами

## Авторы

Проект создан в рамках ИКР-проекта группы 2022.

